generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("PRISMA_DB_CONN")
}

model company {
  companyId          Int       @id @default(autoincrement())
  companyName        String    @unique(map: "companyName") @db.VarChar(255)
  logoPath           String    @db.VarChar(255)
  fax                String?   @db.VarChar(20)
  tel                String    @db.VarChar(8)
  email              String?   @db.VarChar(60)
  whatsapp           String?   @db.VarChar(8)
  address            String    @db.VarChar(100)
  abbreviatedLetters String?   @db.VarChar(20)
  createdBy          Int
  updatedBy          Int?
  companyStatus      Boolean?  @default(true)
  createdAt          DateTime? @default(now()) @db.DateTime(0)
  updatedAt          DateTime? @unique(map: "updatedAt") @db.DateTime(0)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model contracts {
  contractId          Int       @id @default(autoincrement())
  companyId           Int
  docId               String    @db.VarChar(15)
  createdBy           Int
  updatedBy           Int?
  projectId           Int
  price               Float     @db.Float
  totalPrice          Float     @db.Float
  currency            String?   @default("LAK") @db.VarChar(10)
  contractStatus      String?   @default("ACTIVE") @db.VarChar(20)
  area                Float     @db.Float
  numberOfInstallment Int?      @default(1)
  payDay              Int
  modeOfPayment       String?   @default("monthly") @db.VarChar(20)
  payInAdvance        Float?    @default(0) @db.Float
  customerIdOne       Int
  customerIdTwo       Int?
  createdAt           DateTime? @default(now()) @db.DateTime(0)
  updatedAt           DateTime? @default(now()) @db.DateTime(0)
  cancelAt            DateTime? @db.DateTime(0)
  cancelBy            Int?
  reason              String?   @db.VarChar(255)
}

model exchange {
  exchangeId Int       @id @default(autoincrement())
  companyId  Int
  thb        Float     @db.Float
  usd        Float     @db.Float
  createdBy  Int
  updatedBy  Int?
  createdAt  DateTime? @default(now()) @db.DateTime(0)
  updatedAt  DateTime? @default(now()) @db.DateTime(0)
  deletedAt  DateTime? @db.DateTime(0)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model invoice {
  invoiceId        Int       @id @default(autoincrement())
  fines            Float?    @default(0) @db.Float
  amount           Float     @db.Float
  debt             Float?    @default(0) @db.Float
  contractId       Int
  currency         String    @db.VarChar(30)
  paymentMethod    String?   @db.VarChar(50)
  exchangeRate     Float?    @db.Float
  currencyExchange String?   @db.VarChar(5)
  invoiceStatus    String?   @default("PENDING") @db.VarChar(20)
  paidDate         DateTime? @db.DateTime(0)
  createdBy        Int?
  createdAt        DateTime? @default(now()) @db.DateTime(0)
  updatedAt        DateTime? @default(now()) @db.DateTime(0)
}

model projects {
  projectId   Int       @id @default(autoincrement())
  companyId   Int
  area        Float     @db.Float
  projectName String    @db.VarChar(200)
  address     String?   @db.VarChar(100)
  createdBy   Int
  updatedBy   Int?
  createdAt   DateTime? @default(now()) @db.DateTime(0)
  updatedAt   DateTime? @default(now()) @db.DateTime(0)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model transaction {
  transactionId   Int       @id @default(autoincrement())
  ip              String    @db.VarChar(200)
  amount          Float     @db.Float
  remark          String?   @db.VarChar(255)
  currency        String    @db.VarChar(5)
  pamentMethod    String    @db.VarChar(50)
  transactionUUID String?   @db.VarChar(50)
  contractId      Int
  currencyLAK     Float     @db.Float
  currencyTHB     Float     @db.Float
  currencyUSD     Float     @db.Float
  createdBy       Int?
  updatedBy       Int?
  createdAt       DateTime? @default(now()) @db.DateTime(0)
  updatedAt       DateTime? @default(now()) @db.DateTime(0)
  deletedAt       DateTime? @db.DateTime(0)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model users {
  userId     Int       @id @default(autoincrement())
  companyId  Int?
  fullName   String    @db.VarChar(80)
  lastName   String    @db.VarChar(80)
  tel        String    @unique(map: "tel") @db.VarChar(8)
  password   String    @db.VarChar(255)
  role       String?   @default("CUSTOMER") @db.VarChar(10)
  userStatus Boolean?  @default(true)
  createdAt  DateTime? @default(now()) @db.DateTime(0)
  updatedAt  DateTime? @default(now()) @db.DateTime(0)
}
